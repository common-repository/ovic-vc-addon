!function(e){"use strict";var t=function(t){var i={},a=t.serializeArray();return e.each(a,function(){i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i};e.fn.ovic_vc_dependency_data=function(){e(this).each(function(){var t=e(this),i=t.data(),a=t.closest("form"),n=t.find(".value_input"),c=a.find(i.dependency);"not"===i.compare?JSON.parse(n.val())!=i.value||n.val()!=i.value?c.slideDown(300):c.slideUp(300):"check"===i.compare?n.is(":checked")?c.slideDown(300):c.slideUp(300):JSON.parse(n.val())==i.value||n.val()==i.value?c.slideDown(300):c.slideUp(300)})},e.fn.ovic_vc_generate_data=function(){e(this).each(function(){var t=e(this).serialize(),i=e(this).closest(".grid-field-settings");i.find(".wpb_vc_param_value").val(t)})},e.fn.ovic_vc_select_preview=function(){e(this).each(function(){var t=e(this),i=t.val(),a=t.closest(".container-select_preview"),n=a.find(".vc_general"),c=e("#"+n.val()),o="trigger_"+t.attr("id");t.on(o,function(){t.each(function(){var t=e(this).find(":selected").data("preview");a.find(".image-preview img").attr("src",t)})}).trigger(o),a.on("click",".vc_general",function(){var a="",n=1,o=0,s=(e(this),t.find("option").length),l=c.find(".ovic-modal-load");l.html(""),t.find("option").each(function(){var c=e(this).val(),l=e(this).data("preview"),d=e(this).text(),r="select-preview equal-elem";1==n&&(a+="<div>"),c==i&&(r+=" selected"),n++,o++,a+='<a href="#'+t.attr("id")+'" class="'+r+'" data-value="'+c+'">',a+='   <img src="'+l+'">',a+='   <span class="title">'+d+"</span>",a+="</a>",(5==n||s==o)&&(n=1,a+="</div>")}),l.append(a),c.show()}),c.on("click","a.select-preview",function(){var t=e(this).attr("href"),i=e(this).attr("data-value");return e("select"+t).val(i).trigger(o),c.hide(),!1}),c.on("click",".ovic-modal-close, .ovic-modal-overlay",function(){c.hide()}),t.on("change",function(){t.trigger(o)})})},e.fn.ovic_vc_datepicker=function(){var t=e(this);t.on("ovic_vc_datepicker",function(){t.each(function(){var t,i=e(this),a=i.find("input"),n=JSON.parse(i.find(".ovic-vc-datepicker-options").val()),c='<div class="ovic-vc-datepicker-wrapper"></div>',o={beforeShow:function(i,a){t=e("#ui-datepicker-div"),t.wrap(c)},onClose:function(){var e=setInterval(function(){t.is(":hidden")&&(t.unwrap(c),clearInterval(e))},100)}};n=e.extend({},n,o),a.datepicker(n)})}).trigger("ovic_vc_datepicker"),e(document).on("change",function(){t.trigger("ovic_vc_datepicker")})},e.fn.ovic_vc_datetime=function(){var t=e(this);t.on("ovic_vc_datetime",function(){t.each(function(){var t=e(this).find(".vc-field-date").val(),i=e(this).find(".vc-field-time").val(),a=e(this).find(".wpb_vc_param_value");a.val(t+" "+i)})}).trigger("ovic_vc_datetime"),e(document).on("change",function(){t.trigger("ovic_vc_datetime")})},e.fn.ovic_vc_chosen=function(){return this.each(function(){var t=e(this),i=t.parent().find(".chosen-container"),a=t.attr("multiple")||!1,n=e.extend({allow_single_deselect:!0,disable_search_threshold:10,width:"100%"},t.data("chosen-settings"));if(i.length&&i.remove(),t.chosen(n),a){var c=t.parent().find(".ovic-hidden-select"),o=c.val()||[];t.on("change",function(e,t){t&&t.selected?c.append('<option value="'+t.selected+'" selected="selected">'+t.selected+"</option>"):t&&t.deselected&&c.find('option[value="'+t.deselected+'"]').remove(),c.trigger("change")}),ChosenOrder.setSelectionOrder(t,o,!0)}})},e(document).on("click",".vc_edit-form-tab .tab-item",function(){var t=e(this),i=t.closest(".vc_edit-form-tab"),a=t.closest(".vc_shortcode-param"),n=t.data("tabs");i.find(".vc_shortcode-param").not(a).css("display","none"),t.addClass("active").siblings().removeClass("active"),i.find(".vc_shortcode-param."+n).css("display","block")}),e(document).on("click",'.ovic_vc_options button[type="submit"]',function(i){i.preventDefault();var a=0,n=e(this),c=n.closest("form"),o=t(c),s=c.find(".alert-tool");c.addClass("loading"),n.hasClass("reset")&&(a=1),e.ajax({type:"POST",url:ovic_vc_params.ajaxurl,data:{action:"ovic_vc_submit",data:o,reset:a},success:function(e,t){"success"===t?(c.find("tbody").html(e.html),s.html('<div class="notice notice-success is-dismissible" style="margin: 5px 0 10px;"><p>Updated Success!</p></div>')):s.html('<div class="notice notice-error is-dismissible" style="margin: 5px 0 10px;"><p>Updated Failed!</p></div>'),c.removeClass("loading")}})}),e(document).on("click",".ovic_vc_options .field-item.export span.dashicons",function(t){t.preventDefault();var i=e(this).closest(".field-item");i.toggleClass("open")}),e(document).on("click",".ovic_vc_options .field-item.export button.import",function(t){t.preventDefault();var i=e(this),a=i.closest("form"),n=a.find(".import-field").val();a.addClass("loading"),e.ajax({type:"POST",url:ovic_vc_params.ajaxurl,data:{action:"ovic_vc_import_options",data:n},success:function(e,t){a.find(".import-field").val(""),"success"===t&&window.location.reload(),a.removeClass("loading")}})}),e(document).on("click",".ovic_vc_options .add-screen a",function(t){t.preventDefault();var i="",a=e(this),n=a.closest("form");i='<tr class="item-vc"><td><label><input type="text" name="name" placeholder="Name *"></label></td><td><label><select type="text" name="media"><option value="max-width">max-width</option><option value="min-width">min-width</option></select></label></td><td><label><input type="text" name="screen" placeholder="Screen *"></label></td><td style="text-align:center;vertical-align:middle;"><a href="#" class="remove">Remove</a></td></tr>',n.find("tbody").append(i)}),e(document).on("click",".ovic_vc_options .item-vc .remove",function(t){t.preventDefault(),e(this).closest(".item-vc").remove()}),e(document).on("change",".form-grid-data .dependency",function(){e(this).ovic_vc_dependency_data()}),e(document).on("change",".form-grid-data",function(){e(this).ovic_vc_generate_data()}),e(document).on("click",".form-grid-data .vc_param_group-add_content",function(){var t=function(){return"_"+Math.random().toString(36).substr(2,9)},i="responsive_"+t(),a="new_screen_"+t(),n='<p class="field-item '+a+'"><span class="wpb_element_label">New Screen</span><label data-tip="Screen Responsive"><input style="width:calc(100% - 180px);" name="responsive['+a+'][breakpoint]" type="text" class="value_input" value="1024"></label><label data-tip="Item to Show"><input style="width:60px;" name="responsive['+a+'][settings][slidesToShow]" type="text" class="value_input" value="4"></label><label data-tip="Margin Items"><input style="width:60px;" name="responsive['+a+'][settings][slidesMargin]" type="text" class="value_input" value="30"></label><label data-tip="Number Rows"><input style="width:60px;" name="responsive['+a+'][settings][rows]" type="text" class="value_input" value="1"></label><label for="'+i+'" class="disable-vertical"><input id="'+i+'" name="responsive['+a+'][settings][vertical]" type="checkbox" class="value_input" value="false"> Disable Vertical</label><span class="vc_description vc_clearfix"></span><span class="remove button">Remove</span></p>';e(n).insertBefore(this)}),e(document).on("click",".form-grid-data .field-item .remove",function(){var t=e(this).closest(".field-item"),i=e(this).closest(".form-grid-data");t.remove(),i.ovic_vc_generate_data()}),e(document).on("vcPanel.shown",function(t){e(t.target).find(".ovic-vc-chosen").length&&e(t.target).find(".ovic-vc-chosen").ovic_vc_chosen(),e(t.target).find(".ovic_select_preview").length&&e(t.target).find(".ovic_select_preview").ovic_vc_select_preview(),e(t.target).find(".ovic-vc-field-date").length&&(e(t.target).find(".ovic-vc-field-date").ovic_vc_datepicker(),e(t.target).find(".vc-date-time-picker").ovic_vc_datetime()),e(t.target).find("form.form-grid-data").length&&(e(t.target).find(".form-grid-data .dependency").ovic_vc_dependency_data(),e(t.target).find(".form-grid-data").ovic_vc_generate_data()),wp.media&&wp.media.view.Modal.prototype.on("close",function(){setTimeout(function(){e(".supports-drag-drop").hide()},1e3)})})}(jQuery,window,document);